(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();const e={isChanting:!1,isMusicPlaying:!1,audioCtx:null,oscillator:null,gainNode:null,analyser:null,bgAudio:document.getElementById("bg-song")},s=document.getElementById("particle-canvas"),c=s.getContext("2d"),p=document.getElementById("clock"),d=document.getElementById("aura"),m=document.getElementById("oscillator"),x=document.getElementById("lingam-interactive"),w=document.querySelector(".trishul-container");function C(){f(),h(),I(),b()}function f(){s.width=window.innerWidth,s.height=window.innerHeight}window.addEventListener("resize",f);const g=[];class v{constructor(){this.reset()}reset(){this.x=Math.random()*s.width,this.y=Math.random()*s.height,this.size=Math.random()*2,this.speedX=(Math.random()-.5)*.5,this.speedY=(Math.random()-.5)*.5,this.alpha=Math.random()}update(){this.x+=this.speedX,this.y+=this.speedY,(this.x<0||this.x>s.width||this.y<0||this.y>s.height)&&this.reset()}draw(){c.fillStyle=`rgba(243, 201, 105, ${this.alpha*.5})`,c.beginPath(),c.arc(this.x,this.y,this.size,0,Math.PI*2),c.fill()}}for(let t=0;t<150;t++)g.push(new v);function h(){if(c.clearRect(0,0,s.width,s.height),g.forEach(t=>{t.update(),t.draw()}),e.isChanting&&e.analyser){const t=new Uint8Array(e.analyser.frequencyBinCount);e.analyser.getByteFrequencyData(t);const n=t.reduce((r,i)=>r+i)/t.length,o=1+n/128;m.style.transform=`scaleX(${n/255})`,d.style.transform=`scale(${o})`}requestAnimationFrame(h)}function b(){document.getElementById("offer-water").addEventListener("click",()=>u("#4ecca3")),document.getElementById("offer-milk").addEventListener("click",()=>u("#ffffff")),document.getElementById("offer-bilva").addEventListener("click",E),document.getElementById("play-chant").addEventListener("click",A),document.getElementById("audio-toggle").addEventListener("click",M),document.getElementById("start-experience").addEventListener("click",async()=>{document.getElementById("entrance-modal").classList.add("modal-fade-out");try{await y(),playSong()}catch(t){console.error("Audio Context Init Failed:",t),e.bgAudio.play().catch(n=>console.error("Direct Playback Failed:",n))}}),window.addEventListener("mousemove",t=>{const n=(t.clientX/window.innerWidth-.5)*30,o=(t.clientY/window.innerHeight-.5)*30;x.style.transform=`translate(${n}px, ${o}px)`,w.style.transform=`translateY(-50%) translate(${-n}px, ${-o}px)`})}function u(t){const n=document.querySelector(".shiva-lingam-wrapper");for(let o=0;o<20;o++)setTimeout(()=>{const r=document.createElement("div");r.className="divine-particle";const i=(Math.random()-.5)*20;r.style.cssText=`
        width: ${4+Math.random()*4}px;
        height: ${10+Math.random()*20}px;
        left: calc(50% + ${i}px);
        top: 0;
        background: ${t};
        filter: blur(1px);
        animation: drop-flow ${.8+Math.random()*.5}s ease-in forwards;
      `,n.appendChild(r),setTimeout(()=>r.remove(),1500)},o*30);L("Shambho! üôè")}function E(){const t=document.querySelector(".shiva-lingam-wrapper");for(let n=0;n<8;n++)setTimeout(()=>{const o=document.createElement("div");o.innerHTML="üçÉ",o.style.cssText=`
        position: absolute;
        top: -50px;
        left: ${Math.random()*100}%;
        font-size: ${1.5+Math.random()*1}rem;
        z-index: 10;
        pointer-events: none;
        animation: fall ${2+Math.random()*2}s linear forwards;
      `,t.appendChild(o),setTimeout(()=>o.remove(),4e3)},n*200)}function y(){e.audioCtx||(e.audioCtx=new(window.AudioContext||window.webkitAudioContext),e.analyser=e.audioCtx.createAnalyser(),e.analyser.fftSize=256,e.audioCtx.createMediaElementSource(e.bgAudio).connect(e.analyser),e.analyser.connect(e.audioCtx.destination))}function M(){const t=document.getElementById("audio-toggle"),n=t.querySelector(".audio-icon");e.bgAudio.paused?(e.bgAudio.play(),e.isMusicPlaying=!0,n.textContent="üîä",t.style.borderColor="var(--divine-gold)"):(e.bgAudio.pause(),e.isMusicPlaying=!1,n.textContent="üîà",t.style.borderColor="var(--glass-border)")}function A(){e.isChanting=!e.isChanting;const n=document.getElementById("play-chant").querySelector(".btn-label");e.isChanting?(n.textContent="Chanting...",T(),d.style.background="radial-gradient(circle, rgba(243, 201, 105, 0.2) 0%, transparent 70%)"):(n.textContent="AUM Chant",B(),d.style.background="radial-gradient(circle, rgba(243, 201, 105, 0.08) 0%, transparent 70%)",e.isMusicPlaying||(m.style.transform="scaleX(0)"))}function T(){y(),e.oscillator=e.audioCtx.createOscillator(),e.gainNode=e.audioCtx.createGain(),e.oscillator.type="sine",e.oscillator.frequency.setValueAtTime(136.1,e.audioCtx.currentTime),e.gainNode.gain.setValueAtTime(0,e.audioCtx.currentTime),e.gainNode.gain.linearRampToValueAtTime(.2,e.audioCtx.currentTime+2),e.oscillator.connect(e.gainNode),e.gainNode.connect(e.analyser),e.oscillator.start()}function B(){e.gainNode&&(e.gainNode.gain.linearRampToValueAtTime(0,e.audioCtx.currentTime+1),setTimeout(()=>{e.oscillator?.stop()},1e3))}function I(){setInterval(()=>{const t=new Date;p.textContent=t.toLocaleTimeString("en-US",{hour12:!1})},1e3)}function L(t){const n=document.createElement("div");n.style.cssText=`
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    color: var(--divine-gold);
    font-size: 1.2rem;
    letter-spacing: 2px;
    z-index: 1000;
    pointer-events: none;
    animation: fadeUp 2s forwards;
  `,n.textContent=t,document.body.appendChild(n),setTimeout(()=>n.remove(),2e3)}C();
